---
title: "Fluent API ou Annotation, Quem tem mais moral?"
comments: true
excerpt_separator: "Ler mais"
categories:
  - Dica
---

![01]({{site.url}}{{site.baseurl}}/assets/images/efcoretopo.jpg)

<center><strong>Fala pessoal, tudo bem?! 💚</strong></center>
<hr>

## Dica EF Core

<div style="text-align: justify;">
Esses dias estava conversando com alguém e me fez uma pergunta sobre Annotation (no que se refere aos atributos), pois bem resolvi colocar aqui um pequeno exemplo de como mostrar isso em prática e falar que as implementações por FluentAPI sempre anularão as configurações feitas por Annotations(Atributos).
</div>
<br>
Vamos pegar o seguinte cenário para fazer essa pequena demonstração.
<br>
## Nossa Classe
```csharp
[Table("TabelaAnotacao")]
public class Entidade
{
    public int Id { get; set; }

    [Column("DescricaoAnotacao")]
    public string Descricao { get; set; }

    [Column("DataAnotacao")]
    public string Data { get; set; }
}
```

## Nossa DBContext
```csharp
public class ExemploContext : DbContext
{
    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlServer(@"Data Source=.\Sistemas;Initial Catalog=ExemploConfiguracao;Integrated Security=True");
        optionsBuilder.UseLoggerFactory(new LoggerFactory().AddConsole());
    }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Entidade>(p =>
        {
            p.Property(x => x.Descricao).HasColumnName("DescricaoFluentAPI");
            p.Property(x => x.Data).HasColumnName("DataFluentAPI");
            p.ToTable("TabelaFluentAPI");
        });
    }
}
```

## Nosso Programs.cs
```csharp
class Program
{
    static void Main(string[] args)
    {
        using(var db = new ExemploContext())
        {
            db.Database.EnsureCreated();
            db.Set<Entidade>().Where(p => p.Descricao.Length > 0).ToList();
        }
    }
}
```
<br>
Vamos ver a estrutura que o EF Core criou.
<br>
```sql
CREATE TABLE [TabelaFluentAPI] (
    [Id] int NOT NULL IDENTITY,
    [DataFluentAPI] nvarchar(max) NULL,
    [DescricaoFluentAPI] nvarchar(max) NULL,
    CONSTRAINT [PK_TabelaFluentAPI] PRIMARY KEY ([Id])
);
```
<br>
Bom aqui já fica nítido que o EF Core sobrescreve as configurações feitas por anotações, dando a prioridade a configurações feita por Fluent API.
<br><br>
#Pessoal, fico por aqui ##dica!
